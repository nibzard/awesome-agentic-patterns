{
  "title": "Team-Shared Agent Configuration as Code",
  "status": "best-practice",
  "authors": [
    "Nikola Balic (@nibzard)"
  ],
  "based_on": [
    "Boris Cherny (Anthropic)",
    "Enterprise Claude Code Users"
  ],
  "category": "UX & Collaboration",
  "source": "https://every.to/podcast/transcript-how-to-use-claude-code-like-the-people-who-built-it",
  "tags": [
    "configuration",
    "version-control",
    "team-collaboration",
    "permissions",
    "consistency",
    "onboarding"
  ],
  "slug": "team-shared-agent-configuration",
  "id": "team-shared-agent-configuration-as-code",
  "summary": "Check agent configuration into version control as code, enabling consistent behavior across teams, faster onboarding, and collaborative improvement through PRs and code review.",
  "updated_at": "2026-01-05",
  "body": "\n## Problem\n\nWhen each engineer configures their AI agent independently:\n\n- **Inconsistent behavior**: Agents work differently for different team members\n- **Permission friction**: Everyone gets prompted for the same safe commands\n- **Duplicated effort**: Each person solves the same configuration problems\n- **Knowledge silos**: Good configurations don't spread across the team\n- **Onboarding overhead**: New team members start from scratch\n- **Security gaps**: No standardized rules about what agents can/can't touch\n\n## Solution\n\n**Check agent configuration into version control** as part of the repository. Treat `settings.json` (or equivalent) as code—reviewable, shareable, and versioned alongside your project.\n\n**Key configuration elements:**\n\n1. **Pre-allowed commands**: Tools that don't need permission prompts\n2. **Blocked files/directories**: What the agent must never touch\n3. **Default subagents**: Team-standard specialized agents\n4. **Slash commands**: Shared workflows everyone can use\n5. **Hooks**: Standardized automation triggers\n\n```json\n// .claude/settings.json (checked into repo)\n{\n  \"permissions\": {\n    \"pre_allowed\": [\n      \"git add\",\n      \"git commit\",\n      \"git push\",\n      \"npm test\",\n      \"npm run lint\"\n    ],\n    \"blocked_paths\": [\n      \".env\",\n      \"secrets/\",\n      \"*.key\",\n      \"credentials.json\"\n    ]\n  },\n  \"subagents\": {\n    \"security-review\": \"./agents/security.md\",\n    \"migration-helper\": \"./agents/migration.md\"\n  },\n  \"hooks\": {\n    \"pre_commit\": \"./hooks/run_tests.sh\"\n  }\n}\n```\n\n## How to use it\n\n**Implementation steps:**\n\n### 1. Create shared config file\n\nStart with common settings all team members need:\n\n- Commands everyone runs (git, test runners, linters)\n- Sensitive paths no one should modify\n- Standard workflows as slash commands\n\n### 2. Version control it\n\n```bash\ngit add .claude/settings.json\ngit commit -m \"Add shared agent configuration\"\ngit push\n```\n\n### 3. Team adoption\n\nNew team members automatically get the configuration when they clone:\n\n```bash\ngit clone repo\ncd repo\n# Agent reads .claude/settings.json automatically\n```\n\n### 4. Iterate as a team\n\n- PRs can update agent configuration\n- Code review applies to agent settings too\n- Changes propagate via normal git pull\n\n**Benefits observed in enterprise deployments (from transcript):**\n\n> \"Companies that have really big deployments of Claude Code... have settings.json that you check into the code base... you can use this to pre-allow certain commands so you don't get permission prompted every time. And also to block certain commands... and share it with the whole team so everyone gets to use it.\" —Boris Cherny\n\n## Trade-offs\n\n**Pros:**\n\n- **Consistent team experience**: Everyone's agent behaves the same way\n- **Faster onboarding**: New members inherit team knowledge immediately\n- **Reduced friction**: Pre-allowed commands eliminate repetitive prompts\n- **Security standardization**: Uniform rules about sensitive files\n- **Collaborative improvement**: Team can improve config together via PRs\n- **Auditable**: Version history shows why configurations changed\n\n**Cons:**\n\n- **Less individual flexibility**: Can't customize as freely\n- **Potential conflicts**: Personal preferences vs. team standards\n- **Config sprawl**: Settings file can become complex\n- **Override complexity**: Need escape hatch for individual customization\n- **Secrets exposure risk**: Must ensure no credentials in committed config\n\n**Best practices:**\n\n- **Separate local overrides**: Support `.claude/settings.local.json` (gitignored)\n- **Document configuration**: Explain why things are pre-allowed/blocked\n- **Regular review**: Audit config quarterly as tools/threats evolve\n- **Gradual adoption**: Start minimal, expand based on team pain points\n- **Template repositories**: Create starter configs for common project types\n\n## References\n\n* Boris Cherny: \"Companies that have really big deployments of Claude Code... having settings.json that you check into the code base is really important because you can use this to pre-allow certain commands so you don't get permission prompted every time. And also to block certain commands... and this way as an engineer I don't get prompted and I can check this in and share it with the whole team so everyone gets to use it.\"\n* [AI & I Podcast: How to Use Claude Code Like the People Who Built It](https://every.to/podcast/transcript-how-to-use-claude-code-like-the-people-who-built-it)\n"
}