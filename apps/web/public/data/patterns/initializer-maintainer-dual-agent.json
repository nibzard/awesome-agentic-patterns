{
  "title": "Initializer-Maintainer Dual Agent Architecture",
  "status": "emerging",
  "authors": ["Nikola Balic (@nibzard)"],
  "based_on": ["Anthropic Engineering Team"],
  "category": "Orchestration & Control",
  "source": "https://www.anthropic.com/engineering/effective-harnesses-for-long-running-agents",
  "tags": [
    "long-running-agents",
    "session-handoff",
    "lifecycle-specialization",
    "project-bootstrap",
    "incremental-development"
  ],
  "slug": "initializer-maintainer-dual-agent",
  "id": "initializer-maintainer-dual-agent-architecture",
  "summary": "Two-agent architecture with lifecycle-specialized responsibilities: Initializer creates comprehensive foundation once, Maintainer executes incremental development with session bootstrapping rituals to prevent context loss.",
  "updated_at": "2026-01-05",
  "body": "\n## Problem\n\nLong-running agent projects face distinct failure modes at different lifecycle stages:\n\n- **Project initialization** requires comprehensive setup: environment configuration, feature specification, test infrastructure, and progress tracking systems\n- **Incremental development** requires reading prior context, selecting the next task, implementing, and verifying—repeatedly across many sessions\n- Single-agent approaches either over-engineer each session (wasting setup time) or under-invest in foundations (leading to drift and confusion)\n- Session boundaries create context loss, causing agents to restart from scratch or lose track of project state\n\n## Solution\n\nImplement a two-agent architecture with lifecycle-specialized responsibilities:\n\n**1. Initializer Agent** (runs once at project start):\n\n- Creates comprehensive feature list with all requirements\n- Establishes progress tracking artifacts (e.g., `progress.txt`)\n- Sets up environment bootstrap scripts (e.g., `init.sh`)\n- Configures testing infrastructure\n- Makes first git commit with foundational structure\n\n**2. Maintainer/Coding Agent** (runs in subsequent sessions):\n\n- Executes session bootstrapping ritual:\n  1. Verify working directory (`pwd`)\n  2. Read git logs and progress files\n  3. Read feature list and select next incomplete feature\n  4. Run bootstrap script to start services\n  5. Run existing tests before implementing new features\n- Works on one feature at a time\n- Commits after each verified feature\n- Updates progress artifacts\n\n```mermaid\nsequenceDiagram\n    participant Init as Initializer Agent\n    participant FS as Filesystem\n    participant Coding as Coding Agent\n    participant Git as Git Repository\n\n    Note over Init: Runs ONCE at project start\n    Init->>FS: Create feature-list.json (200+ items, all \"passes: false\")\n    Init->>FS: Create init.sh (environment bootstrap)\n    Init->>FS: Create progress.txt (empty log)\n    Init->>Git: Initial commit with foundation\n\n    Note over Coding: Runs in EACH subsequent session\n    loop Session N\n        Coding->>Git: Read git log for context\n        Coding->>FS: Read progress.txt\n        Coding->>FS: Read feature-list.json\n        Coding->>Coding: Select highest-priority incomplete feature\n        Coding->>FS: Run init.sh (start servers)\n        Coding->>Coding: Run E2E tests (verify baseline)\n        Coding->>Coding: Implement single feature\n        Coding->>Coding: Verify feature passes\n        Coding->>FS: Update progress.txt\n        Coding->>Git: Commit changes\n    end\n```\n\n## How to use it\n\n**Best for:**\n\n- Projects requiring many sessions to complete (days/weeks of agent work)\n- Complex applications with 50+ discrete features\n- Scenarios where context loss between sessions is costly\n- Teams using agents for sustained development, not one-shot tasks\n\n**Implementation steps:**\n\n1. **Design the Initializer prompt**: Focus on comprehensive upfront planning\n   - Feature list with detailed acceptance criteria\n   - Environment setup automation\n   - Progress tracking file structure\n\n2. **Design the Coding Agent prompt**: Focus on incremental progress\n   - Session bootstrapping ritual (read context first)\n   - Single-feature focus\n   - Mandatory testing before marking complete\n   - Commit discipline\n\n3. **Define the handoff artifacts**:\n   ```\n   project/\n   ├── feature-list.json    # All features with pass/fail status\n   ├── progress.txt         # Running log of decisions and work\n   ├── init.sh              # One-command environment startup\n   └── .git/                # Descriptive commits as context\n   ```\n\n## Trade-offs\n\n**Pros:**\n\n- Clear separation of concerns between setup and execution\n- Session bootstrapping ritual prevents context loss\n- Mirrors effective human team practices (shift handoffs)\n- Initializer creates consistent foundation for all future sessions\n- Git history + progress files provide rich context for new sessions\n\n**Cons:**\n\n- Requires upfront investment in comprehensive feature specification\n- Two different prompts/configurations to maintain\n- Initializer must anticipate needs of Coding Agent\n- Not suitable for exploratory or research-oriented projects\n- Overhead is wasteful for small, single-session tasks\n\n## References\n\n* [Anthropic Engineering: Effective Harnesses for Long-Running Agents](https://www.anthropic.com/engineering/effective-harnesses-for-long-running-agents)\n* Related: [Filesystem-Based Agent State](filesystem-based-agent-state.md)\n* Related: [Proactive Agent State Externalization](proactive-agent-state-externalization.md)\n"
}
