{
  "title": "Agentic Search Over Vector Embeddings",
  "status": "best-practice",
  "authors": ["Nikola Balic (@nibzard)"],
  "based_on": ["Cat Wu (Anthropic)", "Boris Cherny (Anthropic)"],
  "category": "Tool Use & Environment",
  "source": "https://every.to/podcast/transcript-how-to-use-claude-code-like-the-people-who-built-it",
  "tags": ["search", "vector-embeddings", "bash", "grep", "RAG", "agentic-RAG", "maintenance"],
  "slug": "agentic-search-over-vector-embeddings",
  "id": "agentic-search-over-vector-embeddings",
  "summary": "TODO: Add a concise summary for \"Agentic Search Over Vector Embeddings\" describing the pattern's purpose and key benefits.",
  "updated_at": "2026-01-05",
  "body": "\n## Problem\n\nVector embeddings for code search require:\n\n- Continuous re-indexing as code changes\n- Handling local uncommitted changes\n- Additional security surface area for enterprise deployments\n- Infrastructure overhead (embedding models, vector databases)\n- Stale indices when developers work on multiple branches\n\nTraditional RAG approaches add complexity that may not be necessary with modern capable LLMs.\n\n## Solution\n\nReplace vector search with **agentic search** using bash, grep, file traversal, and other command-line tools. Modern LLMs are skilled enough at using search tools iteratively to achieve comparable accuracy without the maintenance burden of vector indices.\n\n**Key approach:**\n\n1. **Tool-based search**: Provide grep, ripgrep, find, ls, and other search utilities\n2. **Iterative refinement**: Let the agent search multiple times, narrowing results\n3. **No pre-indexing**: Search happens on-demand against current file state\n4. **Optional MCP integration**: If teams want semantic search, expose it via MCP tool\n\n```pseudo\n# Instead of:\nvector_db.index(codebase)  # requires continuous updates\nresults = vector_db.query(embedding(query))\n\n# Use:\nagent.call_tool(\"grep\", pattern=\"function.*authenticate\")\nagent.call_tool(\"find\", pattern=\"**/auth/*.ts\")\nagent.refine_search_based_on_results()\n```\n\n## How to use it\n\n**When to use agentic search:**\n\n- Code bases with frequent changes\n- Teams without dedicated vector infrastructure\n- Security-sensitive deployments (fewer external dependencies)\n- Local development where files change constantly\n- Multi-branch workflows\n\n**Implementation:**\n\n1. Provide comprehensive search tools (grep, ripgrep, find, fd, ast-grep)\n2. Give agent permission to search iteratively\n3. Optimize for fast tool execution rather than perfect first results\n4. Let agent learn search strategies through system prompts\n\n**Claude Code example:**\n\nClaude Code initially used vector embeddings but switched to pure agentic search for:\n\n- **Cleaner deployment**: No indexing step, works immediately\n- **Local changes**: Always searches current file state\n- **Security**: Reduced attack surface for enterprise\n- **Accuracy**: Comparable results with Sonnet 4+ models\n\n## Trade-offs\n\n**Pros:**\n\n- No indexing infrastructure to maintain\n- Always searches current state (no stale results)\n- Works with local uncommitted changes\n- Simpler security model\n- Faster setup for new repositories\n- No embedding model costs\n\n**Cons:**\n\n- May require multiple search iterations (more tokens)\n- Slower on very large codebases (millions of files)\n- Less semantic understanding (e.g., \"authentication\" vs \"login\")\n- Requires capable models (Sonnet 4+) for good results\n- Higher latency for complex queries\n\n## References\n\n* Cat Wu (Anthropic): \"We did use vector embeddings initially. They're really tricky to maintain because you have to continuously re-index... Claude is really good at agentic search. You can get to the same accuracy level with agentic search and it's just a much cleaner deployment story.\"\n* Cat Wu: \"If you do want to bring semantic search to Claude Code, you can do so via an MCP tool.\"\n* [AI & I Podcast: How to Use Claude Code Like the People Who Built It](https://every.to/podcast/transcript-how-to-use-claude-code-like-the-people-who-built-it)\n"
}
